import{_ as T,r as y,o as N,c as f,a as e,w as a,u as t,E as b,b as x,d as C,e as B,f as c,g as p,h,i as v,j as d,k as V,l,t as u,F,m as j,n as M,p as _}from"./index-DWZCqWNX.js";const R={class:"firefly-root"},$={class:"firefly-amount"},A={key:1},D={__name:"RecentTransactionsView",setup(O){const g=y([]),m=y({}),k=async()=>{try{const s=localStorage.getItem("accounts");if(s){const o=JSON.parse(s);m.value=o.reduce((n,i)=>(n[i.id]=i,n),{})}const r=await x.getTransactions();g.value=Object.values(r).map(o=>({...o,category:o.category_name}))}catch{C.error("加载交易列表失败")}},E=s=>{const r=parseFloat(s.replace(/[^\d.-]/g,""));return isNaN(r)?s:`¥ ${r.toFixed(2)}`},w=s=>{if(!s)return"-";const r=m.value[s];return r?r.name:"-"};return N(()=>{k()}),(s,r)=>{const o=B("el-button");return c(),f("div",R,[e(t(b),{gutter:20,justify:"space-between",align:"middle"},{default:a(()=>[e(t(p),{span:16},{default:a(()=>[e(t(h),{class:"firefly-header",shadow:"hover"},{default:a(()=>r[1]||(r[1]=[v("h1",null,"最近交易记录",-1)])),_:1,__:[1]})]),_:1}),e(t(p),{span:8,style:{"text-align":"right"}},{default:a(()=>[e(o,{type:"primary",icon:"Back",onClick:r[0]||(r[0]=n=>s.$router.push("/"))},{default:a(()=>r[2]||(r[2]=[d("返回首页")])),_:1,__:[2]})]),_:1})]),_:1}),e(t(b),{gutter:20,class:"firefly-recent-row"},{default:a(()=>[e(t(p),{span:24},{default:a(()=>[e(t(h),{class:"firefly-recent-card"},{default:a(()=>[e(t(V),{data:g.value,stripe:"",border:"",class:"firefly-table"},{default:a(()=>[e(t(l),{prop:"date",label:"日期",width:"110",align:"center"}),e(t(l),{prop:"description",label:"描述","min-width":"120",align:"center"}),e(t(l),{prop:"amount",label:"金额",width:"100",align:"center"},{default:a(n=>[v("span",$,u(n.row&&n.row.amount?E(n.row.amount):"-"),1)]),_:1}),e(t(l),{prop:"category",label:"分类",width:"100",align:"center"}),e(t(l),{prop:"tags",label:"标签",width:"160",align:"center"},{default:a(n=>[n.row&&n.row.tags?.length?(c(!0),f(F,{key:0},j(n.row.tags,i=>(c(),M(t(_),{key:i,size:"small",class:"mr-5"},{default:a(()=>[d(u(i),1)]),_:2},1024))),128)):(c(),f("span",A,"-"))]),_:1}),e(t(l),{prop:"notes",label:"备注","min-width":"100",align:"center"}),e(t(l),{label:"源账户",width:"120",align:"center"},{default:a(n=>[e(t(_),{type:"danger"},{default:a(()=>[d(u(w(n.row.source_id)),1)]),_:2},1024)]),_:1}),e(t(l),{label:"目的账户",width:"120",align:"center"},{default:a(n=>[e(t(_),{type:"info"},{default:a(()=>[d(u(w(n.row.destination_id)),1)]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})])}}},z=T(D,[["__scopeId","data-v-709dabeb"]]);export{z as default};
